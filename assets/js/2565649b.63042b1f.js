"use strict";(self.webpackChunkopen_register_docs=self.webpackChunkopen_register_docs||[]).push([[9608],{5680:(e,n,t)=>{t.d(n,{xA:()=>s,yg:()=>y});var a=t(6540);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var d=a.createContext({}),g=function(e){var n=a.useContext(d),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},s=function(e){var n=g(e.components);return a.createElement(d.Provider,{value:n},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,d=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),p=g(t),m=r,y=p["".concat(d,".").concat(m)]||p[m]||u[m]||i;return t?a.createElement(y,l(l({ref:n},s),{},{components:t})):a.createElement(y,l({ref:n},s))}));function y(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,l=new Array(i);l[0]=m;var o={};for(var d in n)hasOwnProperty.call(n,d)&&(o[d]=n[d]);o.originalType=e,o[p]="string"==typeof e?e:r,l[1]=o;for(var g=2;g<i;g++)l[g]=t[g];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},6627:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>g});var a=t(8168),r=(t(6540),t(5680));const i={},l="Zoeken",o={unversionedId:"handleidingen/Zoeken",id:"handleidingen/Zoeken",title:"Zoeken",description:"Smart Search",source:"@site/docs/handleidingen/Zoeken.md",sourceDirName:"handleidingen",slug:"/handleidingen/Zoeken",permalink:"/docs/handleidingen/Zoeken",draft:!1,editUrl:"https://github.com/conductionnl/opencatalogi/tree/main/website/docs/handleidingen/Zoeken.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Testscenario's",permalink:"/docs/handleidingen/Testen"},next:{title:"installatie",permalink:"/docs/installatie/"}},d={},g=[{value:"Smart Search",id:"smart-search",level:2},{value:"Field Limiting",id:"field-limiting",level:2},{value:"Entity Extension",id:"entity-extension",level:2},{value:"Pagination",id:"pagination",level:2},{value:"Federalisatie",id:"federalisatie",level:2},{value:"Configuratie per Vraag",id:"configuratie-per-vraag",level:2},{value:"Aggregeren van Resultaten",id:"aggregeren-van-resultaten",level:2}],s={toc:g},p="wrapper";function u(e){let{components:n,...t}=e;return(0,r.yg)(p,(0,a.A)({},s,t,{components:n,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"zoeken"},"Zoeken"),(0,r.yg)("h2",{id:"smart-search"},"Smart Search"),(0,r.yg)("p",null,"Smart search biedt de mogelijkheid om te zoeken op elk attribuut dat als 'doorzoekbaar' is gemarkeerd, zelfs als de oorspronkelijke API geen zoekfunctie biedt voor dat specifieke attribuut of eigenschap."),(0,r.yg)("p",null,"Alle doorzoekbare velden van een endpoint worden automatisch verzameld voor fuzzy search onder de queryparameter ",(0,r.yg)("inlineCode",{parentName:"p"},"search"),", waardoor je bijvoorbeeld kunt zoeken met ",(0,r.yg)("inlineCode",{parentName:"p"},"?search=zoekterm"),". Houd er rekening mee dat dit aanzienlijke prestaties kan kosten, en specifieke zoekopdrachten zijn daarom te verkiezen. Wildcard zoeken ondersteunt alleen attributen van het type ",(0,r.yg)("inlineCode",{parentName:"p"},"string"),"."),(0,r.yg)("p",null,"Smart search ondersteunt ook het doorzoeken van sub-entiteiten door middel van puntnotatie, bijvoorbeeld ",(0,r.yg)("inlineCode",{parentName:"p"},"?field1.subfield1=zoekterm"),"."),(0,r.yg)("h2",{id:"field-limiting"},"Field Limiting"),(0,r.yg)("p",null,"Het beperken van de teruggestuurde gegevens met behulp van een veldqueryparameter wordt ondersteund door de Gateway. Wanneer deze parameter wordt opgegeven, zal de gateway alleen de gevraagde attributen terugsturen en alleen de gevraagde velden registreren in het GDPR-register."),(0,r.yg)("p",null,"Velden kunnen worden opgegeven als kommagescheiden lijst of in een array zoals:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Kommagescheiden: ",(0,r.yg)("inlineCode",{parentName:"li"},"?fields=veld1,veld2,veld3")),(0,r.yg)("li",{parentName:"ul"},"Array: ",(0,r.yg)("inlineCode",{parentName:"li"},"?fields[]=veld1&fields[]=veld2"))),(0,r.yg)("p",null,"Bij sub-entiteiten resulteert het simpelweg vermelden van het attribuut dat de entiteit bevat in het terugsturen van de volledige entiteit. Als alleen specifieke velden nodig zijn, kan een puntnotatie-array deze filteren, bijvoorbeeld ",(0,r.yg)("inlineCode",{parentName:"p"},"?fields[]=veld1.subveld1"),". Veldbeperking wordt ondersteund tot een diepte van 5 velden."),(0,r.yg)("h2",{id:"entity-extension"},"Entity Extension"),(0,r.yg)("p",null,"Met de gateway kun je gekoppelde dataobjecten opnemen in het resultaat alsof het \xe9\xe9n resultaat is. Dit is nuttig als je gekoppelde data naar een andere API in een Common Ground-register tegenkomt (bijvoorbeeld ZGW API's) en voldoende rechten hebt verleend."),(0,r.yg)("p",null,"Je kunt queryparameters uitbreiden zoals:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"?extend=veld1")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"?extend=veld1.subveld1")," (sub-entiteiten)")),(0,r.yg)("p",null,"De gateway probeert slimme caching te gebruiken om de gewenste sub-entiteit snel te leveren, maar dit vereist extra interne of externe API-aanroepen, wat de prestaties aanzienlijk kan be\xefnvloeden."),(0,r.yg)("h2",{id:"pagination"},"Pagination"),(0,r.yg)("p",null,"De webgateway ondersteunt twee benaderingen voor paginering, waardoor de ontwikkelaar kan kiezen wat het beste past."),(0,r.yg)("p",null,"Bij het aanvragen van een GET-aanroep naar een collectie-endpoint, bijvoorbeeld ",(0,r.yg)("inlineCode",{parentName:"p"},"/pet")," in plaats van ",(0,r.yg)("inlineCode",{parentName:"p"},"/pet/{petId}"),", zal het resultaat een (lege) array van objecten in de result-eigenschap van het antwoord zijn."),(0,r.yg)("p",null,"Daarnaast kun je de volgende eigenschappen gebruiken:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"start")," (standaard ingesteld op 1)"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"limit")," (standaard ingesteld op 25)"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"page")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"pages")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"total"))),(0,r.yg)("p",null,"Hierdoor kun je het resultaat op elke gewenste manier opdelen. Basis slicing gebruikt de ",(0,r.yg)("inlineCode",{parentName:"p"},"start"),"- en ",(0,r.yg)("inlineCode",{parentName:"p"},"limit"),"-eigenschappen, en geavanceerde slicing gebruikt de ",(0,r.yg)("inlineCode",{parentName:"p"},"page"),"- en ",(0,r.yg)("inlineCode",{parentName:"p"},"limit"),"-eigenschappen (paginering)."),(0,r.yg)("p",null,"Voorbeeld:\nStel dat je een collectie hebt met 125 resultaten."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "results": [], # array met 25 items\n  "total": 125,\n  "start": 1,\n  "limit": 25,\n  "page": 1,\n  "pages": 5\n')),(0,r.yg)("p",null,"Als je meer resultaten in \xe9\xe9n keer wilt weergeven, stel je de limit in op ?limit=100, het verwachte resultaat zou dan zijn:"),(0,r.yg)("p",null,'{\n"results": [], # array met 100 items\n"total": 125,\n"start": 1,\n"limit": 100,\n"page": 1,\n"pages": 2\n}'),(0,r.yg)("p",null,"Je kunt pagineringsknoppen aan je gebruiker aanbieden op basis van de page-eigenschap. Als de gebruiker op pagina 2 klikt (of volgende), is je volgende aanroep ?limit=100&page=2 en het resultaat:"),(0,r.yg)("p",null,'{\n"results": [], # array met 25 items\n"total": 125,\n"start": 101,\n"limit": 100,\n"page": 2,\n"pages": 2\n}'),(0,r.yg)("p",null,"Je kunt ook ",(0,r.yg)("inlineCode",{parentName:"p"},"?limit=100&start=101")," gebruiken voor hetzelfde resultaat."),(0,r.yg)("p",null,"Opmerking: Paginering wordt niet ondersteund voor de volgende accept headers: text/csv, text/html."),(0,r.yg)("h2",{id:"federalisatie"},"Federalisatie"),(0,r.yg)("p",null,"Federalisatie is een proces waarbij een binnenkomende vraag asynchroon wordt doorgezet naar verschillende bronnen (catalogi). De resultaten van deze bronnen worden geaggregeerd en als totaalresultaat teruggegeven aan de vrager. Dit vormt de kern van het search endpoint en zorgt ervoor dat meerdere organisaties kunnen worden bevraagd zonder een centrale index of datalake op te bouwen."),(0,r.yg)("h2",{id:"configuratie-per-vraag"},"Configuratie per Vraag"),(0,r.yg)("p",null,"Bij elke vraag kan de vragende partij (requester) bepalen hoe het verzoek wordt afgehandeld. Hierbij ligt de focus op wanneer een federatieve bevraging als afgerond wordt beschouwd en welke bronnen worden uitgesloten."),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,r.yg)("th",{parentName:"tr",align:null},"Standaardwaarde"),(0,r.yg)("th",{parentName:"tr",align:null},"Beschrijving"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"_federalization_use_sources")),(0,r.yg)("td",{parentName:"tr",align:null},"*"),(0,r.yg)("td",{parentName:"tr",align:null},"Standaard worden ALLE beschikbare bronnen gebruikt. Als \xe9\xe9n of meer bronnen worden opgegeven (a.h.v uuid), worden alleen deze gebruikt.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"_federalization_exclude_sources")),(0,r.yg)("td",{parentName:"tr",align:null},"null"),(0,r.yg)("td",{parentName:"tr",align:null},"Bronnen kunnen worden uitgesloten van de zoekopdracht.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"_federalization_timeout")),(0,r.yg)("td",{parentName:"tr",align:null},"3000"),(0,r.yg)("td",{parentName:"tr",align:null},"Maximale tijd (in milliseconden) die wordt gewacht op antwoorden van onderliggende bronnen voordat deze als timeout worden beschouwd.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"_federalization_ignore_error")),(0,r.yg)("td",{parentName:"tr",align:null},"false"),(0,r.yg)("td",{parentName:"tr",align:null},"Bepaalt of de zoekopdracht wordt afgebroken bij de eerste foutmelding van een bron.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"_federalization_relay_rating")),(0,r.yg)("td",{parentName:"tr",align:null},"true"),(0,r.yg)("td",{parentName:"tr",align:null},"Gebruik de rating van de onderliggende bron in plaats van zelf een rating vast te stellen.")))),(0,r.yg)("p",null,(0,r.yg)("em",{parentName:"p"},"Opmerking:")," ",(0,r.yg)("inlineCode",{parentName:"p"},"_federalization_use_sources")," en ",(0,r.yg)("inlineCode",{parentName:"p"},"_federalization_exclude_sources")," kunnen niet gelijktijdig worden gebruikt."),(0,r.yg)("h2",{id:"aggregeren-van-resultaten"},"Aggregeren van Resultaten"),(0,r.yg)("p",null,"De zoekservice gaat ervan uit dat iedere aangeroepen bron een resultaat teruglevert in de vorm van een JSON-resultaatobject waarbij de gevonden objecten zich als array onder de property results bevinden."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "results": []\n}\n')),(0,r.yg)("p",null,"De verschillende resultaatobjecten uit de diverse bronnen worden voorzien van een ",(0,r.yg)("inlineCode",{parentName:"p"},"_rating")," (mate waarin trefwoorden in het object voorkomen) en ",(0,r.yg)("inlineCode",{parentName:"p"},"_source")," (UUID van de bron zoals bekend bij het federatieve zoekendpoint) property en ondergebracht in een nieuwe resultlist binnen de zoekservice."),(0,r.yg)("p",null,"De resultaten van de bron (status, status name, response time, objects_returned) worden toegevoegd aan de source list."),(0,r.yg)("p",null,"Vervolgens wordt de result array geordend op ",(0,r.yg)("inlineCode",{parentName:"p"},"_rating"),", pagination toegepast en een JSON-resultaatobject naar de vragende partij gestuurd."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "_sources": [\n    {\n      "id": "123e4567-e89b-12d3-a456-426614174000",\n      "name": "Bron 1",\n      "status_code": 202,\n      "status_name": "found",\n      "response_time": 2022,\n      "objects_returned": 2\n    },\n    {\n      "id": "123e4567-e89b-12d3-a456-426614174001",\n      "name": "Bron 2",\n      "status_code": 202,\n      "status_name": "found",\n      "response_time": 2043,\n      "objects_returned": 2\n    }\n  ],\n  "results": [\n    {\n      "_rating": 90,\n      "_source": "123e4567-e89b-12d3-a456-426614174001",\n      "name": "Object 1"\n    },\n    {\n      "_rating": 85,\n      "_source": "123e4567-e89b-12d3-a456-426614174000",\n      "name": "Object 2"\n    }\n  ]\n}\n')),(0,r.yg)("p",null,"Door gebruik te maken van deze configuratie- en aggregatieopties, kan de zoekfunctionaliteit binnen een federatief stelsel effici\xebnt en effectief worden ingezet om relevante resultaten te leveren vanuit meerdere bronnen."))}u.isMDXComponent=!0}}]);